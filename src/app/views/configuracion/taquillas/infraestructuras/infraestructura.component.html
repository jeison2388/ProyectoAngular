<div class="animated fadeIn">
    <form [formGroup]="form" (ngSubmit)="guardar()">
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <strong>Infraestructura</strong>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-{{conU}}">
                                <!--INICIO DEL FORMULARIO-->
                                <div class="row">
                                    <div class="form-group col-sm-3">
                                        <label for="codigo">Código<span class="text-danger">*</span></label>
                                        <input appUpper formControlName="codigo" type="text"
                                            class="form-control border-info" id="codigo" placeholder="Código"
                                            [ngClass]="{ 'is-invalid': submitted && f.codigo.errors }"
                                            autocomplete="nop" />
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 16 caracteres
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-9">
                                        <label for="descripcion">Descripción<span class="text-danger">*</span></label>
                                        <input appUpper formControlName="descripcion" type="text"
                                            class="form-control border-info" id="descripcion" placeholder="Descripción"
                                            [ngClass]="{ 'is-invalid': submitted && f.descripcion.errors }"
                                            autocomplete="nop">
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 256 caracteres
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="estado">Estado<span class="text-danger">*</span></label>
                                        <select class="form-control placeholder" formControlName="estado" id="estado"
                                            (ngModelChange)="cargarCiudades($event)" class="form-control border-info"
                                            [ngClass]="{ 'is-invalid': submitted && f.estado.errors }">
                                            <option value="">.::Seleccione::.</option>
                                            <option *ngFor="let estado of estados" value={{estado.id}}>
                                                {{estado.descripcion}}
                                            </option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Campo requerido
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="ciudad">Ciudad<span class="text-danger">*</span></label>
                                        <select class="form-control placeholder" formControlName="ciudad" id="ciudad"
                                            class="form-control border-info"
                                            [ngClass]="{ 'is-invalid': submitted && f.ciudad.errors }">
                                            <option value="">.::Seleccione::.</option>
                                            <option *ngFor="let ciudad of ciudades" value={{ciudad.id}}>
                                                {{ciudad.descripcion}}
                                            </option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Campo requerido
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="direccion">Dirección<span class="text-danger">*</span></label>
                                        <input appUpper formControlName="direccion" type="text"
                                            class="form-control border-info" id="direccion" placeholder="direccion"
                                            [ngClass]="{ 'is-invalid': submitted && f.direccion.errors }" />
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 16 caracteres
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="telefono">Teléfono<span class="text-danger">*</span></label>
                                        <input appUpper formControlName="telefono" type="text"
                                            class="form-control border-info" id="telefono" placeholder="telefono"
                                            [ngClass]="{ 'is-invalid': submitted && f.telefono
                                                                    .errors }" />
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 16 caracteres
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-6">
                                        <label for="latitud">Latitud<span class="text-danger">*</span></label>
                                        <input formControlName="latitud" type="text" class="form-control border-info"
                                            id="latitud" placeholder="latitud"
                                            [ngClass]="{ 'is-invalid': submitted && f.latitud.errors }" />
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 16 caracteres
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="longitud">Longitud<span class="text-danger">*</span></label>
                                        <input formControlName="longitud" type="text" class="form-control border-info"
                                            id="longitud" placeholder="longitud"
                                            [ngClass]="{ 'is-invalid': submitted && f.longitud.errors }" />
                                        <div class="invalid-feedback">
                                            Campo requerido Min 4 y Max 16 caracteres
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="card">
                                            <div class="card-header">
                                                Horario habilitado
                                            </div>
                                            <div class="card-body ">
                                                <div class="row">
                                                    <div class="form-group col-sm-6">
                                                        <label for="atencion_desde">Desde<span
                                                                class="text-danger">*</span></label>
                                                        <ngb-timepicker id="atencion_desde"
                                                            formControlName="atencion_desde"
                                                            [ngClass]="{ 'is-invalid': submitted && f.atencion_desde.errors }">
                                                        </ngb-timepicker>
                                                        <div class="invalid-feedback">
                                                            Campo requerido
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-sm-6">
                                                        <label for="atencion_hasta0">Hasta<span
                                                                class="text-danger">*</span></label>
                                                        <ngb-timepicker id="atencion_hasta"
                                                            formControlName="atencion_hasta">
                                                        </ngb-timepicker>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--FIN DEL FORMULARIO-->

                            <div class="col-sm-6" *ngIf="pk>0">
                                <div class="card">
                                    <div class="card-header">
                                        Unidades
                                    </div>
                                    <div class="card-body">
                                        <div class="row">

                                            <div class="form-group col-sm-2">
                                                <label for="codigou">Código<span class="text-danger">*</span></label>
                                                <input appUpper [(ngModel)]="codigou" type="text"
                                                    class="form-control border-info {{invalidCod}}" id="codigou"
                                                    placeholder="Código" [ngModelOptions]="{standalone: true}"
                                                    autocomplete="nop" />
                                                <div class="invalid-feedback">
                                                    Campo requerido Min 4 y Max 16 caracteres
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="descripcionu">Descripción<span
                                                        class="text-danger">*</span></label>
                                                <input appUpper [(ngModel)]="descripcionu" type="text"
                                                    class="form-control border-info {{invalidDes}}" id="descripcionu"
                                                    placeholder="Descripción" [ngModelOptions]="{standalone: true}"
                                                    autocomplete="nop" />
                                                <div class="invalid-feedback">
                                                    Campo requerido Min 4 y Max 256 caracteres
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-4">
                                                <label for="cantidadu">Cantidad de personas<span
                                                        class="text-danger">*</span></label>
                                                <input appUpper [(ngModel)]="cantidadu" type="text"
                                                    class="form-control border-info" id="cantidadu"
                                                    placeholder="Cantidad" [ngModelOptions]="{standalone: true}"
                                                    autocomplete="nop" />
                                                <div class="invalid-feedback">
                                                    Campo requerido Min 4 y Max 256 caracteres
                                                </div>
                                            </div>
                                            <div class="form-group col-sm-12">
                                                <div class="">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            Horario habilitado
                                                        </div>
                                                        <div class="card-body ">
                                                            <div class="row">
                                                                <div class="form-group col-sm-6">
                                                                    <label for="desdeu">Desde<span
                                                                            class="text-danger">*</span></label>
                                                                    <ngb-timepicker id="desdeu" [(ngModel)]="desdeu"
                                                                        [ngModelOptions]="{standalone: true}">
                                                                    </ngb-timepicker>
                                                                </div>
                                                                <div class="form-group col-sm-6">
                                                                    <label for="hastau">Hasta<span
                                                                            class="text-danger">*</span></label>
                                                                    <ngb-timepicker id="hastau" [(ngModel)]="hastau"
                                                                        [ngModelOptions]="{standalone: true}">
                                                                    </ngb-timepicker>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row justify-content-md-center form-group">
                                                    <button type="button" class="btn btn-lg btn-primary"
                                                        (click)="agregarUnidad()"><i class="fa fa-arrow-down"></i>
                                                        Agregar</button>&nbsp;
                                                    <button class="btn btn-lg btn-light" (click)="clearFormUnidad()"><i
                                                            class="fa fa-eraser"></i> Limpiar</button>
                                                </div>
                                                <div class="row">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>Código</th>
                                                                <th>Descripción</th>
                                                                <th>Cant. personas</th>
                                                                <th>Horario</th>
                                                                <th>Acciones</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let item of unidades ">
                                                                <td>{{item.codigo}}</td>
                                                                <td>{{item.descripcion}}</td>
                                                                <td>{{item.cantidadPersonas}}</td>
                                                                <td>{{item.atencionDesde}} - {{item.atencionHasta}}</td>
                                                                <td>
                                                                    <button type="button" (click)=editar(item.id)
                                                                        class="btn btn-sm btn-primary">Editar</button>&nbsp;
                                                                    <button type="button" (click)=eliminar(item.id)
                                                                        class="btn btn-sm btn-danger">Eliminar</button>&nbsp;
                                                                </td>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row text-right">
                            <div class="form-group col-sm-12">
                                <button type="submit" *ngIf="pk===0" class="btn btn-lg btn-light"
                                    (click)="clearForm()"><i class="fa fa-eraser"></i> Limpiar</button>
                                <button type="submit" class="btn btn-lg btn-success"><i class="fa fa-save"></i>
                                    Guardar</button>
                                <button type="button" class="btn btn-lg btn-secondary" (click)="cancelar()"><i
                                        class="fa fa-ban"></i> Cancelar</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <!--/.col-->
        </div>
        <!--/.row-->
    </form>
</div>
<notifier-container></notifier-container>